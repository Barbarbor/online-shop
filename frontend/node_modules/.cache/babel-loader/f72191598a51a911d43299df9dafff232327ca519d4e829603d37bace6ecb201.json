{"ast":null,"code":"// orderActions.js\nimport axios from 'axios';\nimport { HOST } from '../../constants';\nexport const createOrder = cartItems => {\n  return async dispatch => {\n    try {\n      // Create the order\n      const orderResponse = await axios.post(`${HOST}/api/orders`, {\n        order_date: new Date(),\n        status: 'Paid',\n        UserId: 1 // Replace with user authentication when available\n      });\n\n      // Create order items\n      const orderItems = cartItems.map(item => {\n        return {\n          quantity: item.quantity,\n          // Use the quantity from the cart item\n          subtotal: item.quantity * item.price,\n          // Calculate subtotal\n          OrderId: orderResponse.data.id,\n          ProductId: item.ProductId\n        };\n      });\n\n      // Create the order items\n      const orderItemsResponse = await axios.post(`${HOST}/api/order-items`, orderItems);\n\n      // Dispatch actions\n      dispatch({\n        type: 'CREATE_ORDER',\n        payload: {\n          order: orderResponse.data,\n          orderItems: orderItemsResponse.data\n        }\n      });\n    } catch (error) {\n      // Handle error\n    }\n  };\n};","map":{"version":3,"names":["axios","HOST","createOrder","cartItems","dispatch","orderResponse","post","order_date","Date","status","UserId","orderItems","map","item","quantity","subtotal","price","OrderId","data","id","ProductId","orderItemsResponse","type","payload","order","error"],"sources":["/home/alexxpain/shop/frontend/src/store/actions/orderActions.js"],"sourcesContent":["// orderActions.js\nimport axios from 'axios';\nimport { HOST } from '../../constants';\n\nexport const createOrder = (cartItems) => {\n    return async (dispatch) => {\n        try {\n            // Create the order\n            const orderResponse = await axios.post(`${HOST}/api/orders`, {\n                order_date: new Date(),\n                status: 'Paid',\n                UserId: 1, // Replace with user authentication when available\n            });\n\n            // Create order items\n            const orderItems = cartItems.map((item) => {\n                return {\n                    quantity: item.quantity, // Use the quantity from the cart item\n                    subtotal: item.quantity * item.price, // Calculate subtotal\n                    OrderId: orderResponse.data.id,\n                    ProductId: item.ProductId,\n                };\n            });\n\n            // Create the order items\n            const orderItemsResponse = await axios.post(`${HOST}/api/order-items`, orderItems);\n\n            // Dispatch actions\n            dispatch({\n                type: 'CREATE_ORDER',\n                payload: { order: orderResponse.data, orderItems: orderItemsResponse.data },\n            });\n        } catch (error) {\n            // Handle error\n        }\n    };\n};\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,QAAQ,iBAAiB;AAEtC,OAAO,MAAMC,WAAW,GAAIC,SAAS,IAAK;EACtC,OAAO,MAAOC,QAAQ,IAAK;IACvB,IAAI;MACA;MACA,MAAMC,aAAa,GAAG,MAAML,KAAK,CAACM,IAAI,CAAE,GAAEL,IAAK,aAAY,EAAE;QACzDM,UAAU,EAAE,IAAIC,IAAI,CAAC,CAAC;QACtBC,MAAM,EAAE,MAAM;QACdC,MAAM,EAAE,CAAC,CAAE;MACf,CAAC,CAAC;;MAEF;MACA,MAAMC,UAAU,GAAGR,SAAS,CAACS,GAAG,CAAEC,IAAI,IAAK;QACvC,OAAO;UACHC,QAAQ,EAAED,IAAI,CAACC,QAAQ;UAAE;UACzBC,QAAQ,EAAEF,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACG,KAAK;UAAE;UACtCC,OAAO,EAAEZ,aAAa,CAACa,IAAI,CAACC,EAAE;UAC9BC,SAAS,EAAEP,IAAI,CAACO;QACpB,CAAC;MACL,CAAC,CAAC;;MAEF;MACA,MAAMC,kBAAkB,GAAG,MAAMrB,KAAK,CAACM,IAAI,CAAE,GAAEL,IAAK,kBAAiB,EAAEU,UAAU,CAAC;;MAElF;MACAP,QAAQ,CAAC;QACLkB,IAAI,EAAE,cAAc;QACpBC,OAAO,EAAE;UAAEC,KAAK,EAAEnB,aAAa,CAACa,IAAI;UAAEP,UAAU,EAAEU,kBAAkB,CAACH;QAAK;MAC9E,CAAC,CAAC;IACN,CAAC,CAAC,OAAOO,KAAK,EAAE;MACZ;IAAA;EAER,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}