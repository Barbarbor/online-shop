{"ast":null,"code":"var _jsxFileName = \"/home/alexxpain/shop/frontend/src/components/forms/ProductForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { HOST } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductForm = ({\n  onSubmit,\n  categories,\n  subcategories\n}) => {\n  _s();\n  const {\n    register,\n    handleSubmit,\n    reset\n  } = useForm();\n  const [photoPath, setPhotoPath] = useState(''); // State to store the photo path\n\n  const handleFormSubmit = async data => {\n    data.CategoryId = parseInt(data.CategoryId);\n    data.SubcategoryId = parseInt(data.SubcategoryId);\n    try {\n      // Create a new FormData object to upload the photo\n      const formData = new FormData();\n      formData.append('file', data.productImage[0]); // Assuming 'productImage' is the file input name\n\n      // Make a POST request to upload the photo\n      const response = await axios.post(`${HOST}/api/upload`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      // Set the photo path returned by the server in your form data\n      data.photography_url = response.data.photoUrl;\n\n      // Call the onSubmit prop with the form data\n      onSubmit(data);\n\n      // Reset the form after submission\n      reset();\n      setPhotoPath('');\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n    }\n  };\n\n  // Function to handle file input change and get the file path\n  const handleImageUpload = event => {\n    const file = event.target.files[0];\n    // Get the path of the selected file (assuming it's an image)\n    setPhotoPath(URL.createObjectURL(file));\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(handleFormSubmit),\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Product Name\",\n      ...register('name', {\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Product Description\",\n      ...register('description', {\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      placeholder: \"Product Price\",\n      ...register('price', {\n        required: true,\n        valueAsNumber: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      name: \"productImage\",\n      accept: \"image/*\" // Accept only image files\n      ,\n\n      onChange: handleImageUpload // Handle file input change\n      ,\n      ...register('productImage', {\n        required: true\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      ...register('CategoryId', {\n        required: true,\n        valueAsNumber: true\n      }),\n      children: categories.map(category => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: category.id,\n        children: category.name\n      }, category.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      ...register('SubcategoryId', {\n        required: true,\n        valueAsNumber: true\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"Select Subcategory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), subcategories.map(subcategory => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: subcategory.id,\n        children: subcategory.name\n      }, subcategory.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Add Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductForm, \"DJJ8WNU5XePgpaHAl0eKQHbMuE8=\", false, function () {\n  return [useForm];\n});\n_c = ProductForm;\nexport default ProductForm;\nvar _c;\n$RefreshReg$(_c, \"ProductForm\");","map":{"version":3,"names":["React","useState","useForm","axios","HOST","jsxDEV","_jsxDEV","ProductForm","onSubmit","categories","subcategories","_s","register","handleSubmit","reset","photoPath","setPhotoPath","handleFormSubmit","data","CategoryId","parseInt","SubcategoryId","formData","FormData","append","productImage","response","post","headers","photography_url","photoUrl","error","console","handleImageUpload","event","file","target","files","URL","createObjectURL","children","type","placeholder","required","fileName","_jsxFileName","lineNumber","columnNumber","valueAsNumber","name","accept","onChange","map","category","value","id","subcategory","_c","$RefreshReg$"],"sources":["/home/alexxpain/shop/frontend/src/components/forms/ProductForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { HOST } from '../../constants';\n\nconst ProductForm = ({ onSubmit, categories, subcategories }) => {\n    const { register, handleSubmit, reset } = useForm();\n    const [photoPath, setPhotoPath] = useState(''); // State to store the photo path\n\n    const handleFormSubmit = async (data) => {\n        data.CategoryId = parseInt(data.CategoryId);\n        data.SubcategoryId = parseInt(data.SubcategoryId);\n\n        try {\n            // Create a new FormData object to upload the photo\n            const formData = new FormData();\n            formData.append('file', data.productImage[0]); // Assuming 'productImage' is the file input name\n\n            // Make a POST request to upload the photo\n            const response = await axios.post(`${HOST}/api/upload`, formData, {\n                headers: { 'Content-Type': 'multipart/form-data' },\n            });\n\n\n            // Set the photo path returned by the server in your form data\n            data.photography_url = response.data.photoUrl;\n\n            // Call the onSubmit prop with the form data\n            onSubmit(data);\n\n            // Reset the form after submission\n            reset();\n            setPhotoPath('');\n        } catch (error) {\n            console.error('Error uploading photo:', error);\n        }\n    };\n\n    // Function to handle file input change and get the file path\n    const handleImageUpload = (event) => {\n        const file = event.target.files[0];\n        // Get the path of the selected file (assuming it's an image)\n        setPhotoPath(URL.createObjectURL(file));\n    };\n\n    return (\n        <form onSubmit={handleSubmit(handleFormSubmit)}>\n            <input\n                type=\"text\"\n                placeholder=\"Product Name\"\n                {...register('name', { required: true })}\n            />\n\n            <textarea\n                placeholder=\"Product Description\"\n                {...register('description', { required: true })}\n            />\n\n            <input\n                type=\"number\"\n                placeholder=\"Product Price\"\n                {...register('price', { required: true, valueAsNumber: true })}\n            />\n\n            {/* File input for Photography URL */}\n            <input\n                type=\"file\"\n                name=\"productImage\"\n                accept=\"image/*\" // Accept only image files\n\n                onChange={handleImageUpload} // Handle file input change\n                {...register('productImage', { required: true })}\n            />\n\n            <select {...register('CategoryId', { required: true, valueAsNumber: true })}>\n                \n                {categories.map((category) => (\n                    <option key={category.id} value={category.id}>\n                        {category.name}\n                    </option>\n                ))}\n            </select>\n\n            <select {...register('SubcategoryId', { required: true, valueAsNumber: true })}>\n                <option value=\"\">Select Subcategory</option>\n                {subcategories.map((subcategory) => (\n                    <option key={subcategory.id} value={subcategory.id}>\n                        {subcategory.name}\n                    </option>\n                ))}\n            </select>\n\n            <button type=\"submit\">Add Product</button>\n        </form>\n    );\n};\n\nexport default ProductForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}